<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.79.1" /><meta name="theme-color" content="#fff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>jenkins集成sonarqube代码审查 | latte Studio</title>

    <link rel="stylesheet" href="/css/meme.min.8a81df5e3f7eb67a8efa8e4c7ef0221c34298a277fc9e3d31209eb1eccd22213.css"/>

    
    
        <script src="/js/meme.min.ed0152d13f653ff21bf0e76a728fd6ae9b762c7a7bad8bc4eab82218fb602206.js"></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" /></noscript>

    <meta name="author" content="latteStudio" /><meta name="description" content="jenkins集成sonarqube代码审查" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="latte Studio" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="latte Studio" />
    <meta name="msapplication-starturl" content="../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://latteStudio.github.io/posts/jenkins%E9%9B%86%E6%88%90sonarqube%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2020-12-22T17:13:38+00:00",
        "dateModified": "2020-12-24T14:37:32+08:00",
        "url": "https://latteStudio.github.io/posts/jenkins%E9%9B%86%E6%88%90sonarqube%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5/",
        "headline": "jenkins集成sonarqube代码审查",
        "description": "jenkins集成sonarqube代码审查",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  2912 ,
        "image": ["https://gitee.com/boogie96/img/raw/master/img/image-20201222180220475.png","https://gitee.com/boogie96/img/raw/master/img/image-20201222190734210.png","https://gitee.com/boogie96/img/raw/master/img/image-20201222191031455.png","https://gitee.com/boogie96/img/raw/master/img/image-20201222191730490.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223142508638.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223162403719.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223165753498.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223171213755.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223171352712.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223171515299.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223180757468.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223172338708.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223175834072.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223175904259.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223175913738.png","https://gitee.com/boogie96/img/raw/master/img/image-20201223180613796.png"],
        "author": {
            "@type": "Person",
            "description": "KISS——Keep it simple, stupid~",
            "email": "boogies@163.com",
            "image": "https://latteStudio.github.io/icons/apple-touch-icon.png",
            "url": "latteStudio.github.io",
            "name": "latteStudio"
        },
        "license": "[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)",
        "publisher": {
            "@type": "Organization",
            "name": "latte Studio",
            "logo": {
                "@type": "ImageObject",
                "url": "https://latteStudio.github.io/icons/apple-touch-icon.png"
            },
            "url": "https://latteStudio.github.io/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://latteStudio.github.io/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary_large_image" />



    



<meta property="og:title" content="jenkins集成sonarqube代码审查" />
<meta property="og:description" content="jenkins集成sonarqube代码审查" />
<meta property="og:url" content="https://latteStudio.github.io/posts/jenkins%E9%9B%86%E6%88%90sonarqube%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5/" />
<meta property="og:site_name" content="latte Studio" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://gitee.com/boogie96/img/raw/master/img/image-20201222180220475.png" />
<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-12-22T17:13:38&#43;00:00" />
    <meta property="article:modified_time" content="2020-12-24T14:37:32&#43;08:00" />
    
    <meta property="article:section" content="posts" />



    
</head>

    <body>
        <div class="container">
            
    <header class="header">
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="/" class="brand">latte Studio</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="/posts/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class="menu-item-name">归档</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon th"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg><span class="menu-item-name">分类</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/tags/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg><span class="menu-item-name">标签</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/about/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class="menu-item-name">关于</span></a>
                </li>
            
        
            
                
                    
                    
                        <li class="menu-item">
                            <a id="theme-switcher" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5l48.8-97.5a18 18 0 0128 0l48.8 97.5 103.4 -34.5a18 18 0 0119.8 19.8l-34.5 103.4l97.5 48.8a18 18 0 010 28l-97.5 48.8 34.5 103.4a18 18 0 01-19.8 19.8l-103.4-34.5-48.8 97.5a18 18 0 01-28 0l-48.8-97.5l-103.4 34.5a18 18 0 01-19.8-19.8l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8-34.5-103.4a18 18 0 0119.8-19.8zM256 128a128 128 0 10.01 0M256 160a96 96 0 10.01 0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412a256 256 0 10154-407a11.5 11.5 0 00-5 20a201.5 201.5 0 01-134 374a11.5 11.5 0 00-15 13"/></svg></a>
                        </li>
                    
                
            
        
            
                
            
        
    </ul>
</nav>

                    
                </div>
            </div>
            
    <input type="checkbox" id="nav-toggle" aria-hidden="true" />
    <label for="nav-toggle" class="nav-toggle"></label>
    <label for="nav-toggle" class="nav-curtain"></label>


        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="justify" data-type="posts" data-toc-num="true">

            <h1 class="post-title p-name">jenkins集成sonarqube代码审查</h1>

            

            
                <div class="post-description p-summary">jenkins集成sonarqube代码审查</div>
                
            

            
                

<div class="post-meta">
    
        
        <time datetime="2020-12-22T17:13:38&#43;00:00" class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>&nbsp;2020.12.22</time>
    
    
        
        <time datetime="2020-12-24T14:37:32&#43;08:00" class="post-meta-item modified dt-updated"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2020.12.24</time>
    
    
    
        
        
        
            
                <span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href="/categories/%E8%BF%90%E7%BB%B4/" class="category-link p-category">运维</a>/<a href="/categories/devops/" class="category-link p-category">devops</a></span>
            
        
    
    
        
        <span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;2912</span>
    
    
        
        <span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;6&nbsp;分钟</span>
    
    
    
</div>

            

            <nav class="contents">
  <h2 id="contents" class="contents-title">目录</h2><ol class="toc">
    <li><a id="contents:sonarqube依赖环境部署" href="#sonarqube依赖环境部署">sonarqube依赖环境部署</a>
      <ol>
        <li><a id="contents:mysql安装" href="#mysql安装">mysql安装</a></li>
        <li><a id="contents:jdk安装" href="#jdk安装">jdk安装</a></li>
        <li><a id="contents:内核参数调整" href="#内核参数调整">内核参数调整</a></li>
      </ol>
    </li>
    <li><a id="contents:安装sonarqube" href="#安装sonarqube">安装sonarqube</a></li>
    <li><a id="contents:安装sonar-scanner" href="#安装sonar-scanner">安装sonar-scanner</a>
      <ol>
        <li><a id="contents:安装sonar-scanner-1" href="#安装sonar-scanner-1">安装sonar-scanner</a></li>
        <li><a id="contents:准备测试代码" href="#准备测试代码">准备测试代码</a></li>
        <li><a id="contents:执行扫描" href="#执行扫描">执行扫描</a></li>
        <li><a id="contents:jenkins关联到sonarqube" href="#jenkins关联到sonarqube">Jenkins关联到sonarqube</a></li>
        <li><a id="contents:构建jenkins项目测试sonar-scanner" href="#构建jenkins项目测试sonar-scanner">构建Jenkins项目测试sonar-scanner</a></li>
      </ol>
    </li>
  </ol>
</nav><div class="post-body e-content">
              <h1 id="sonarqube简介"><a href="#sonarqube简介" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:sonarqube简介" class="headings">sonarqube简介</a></h1>
<blockquote>
<p>what is sonarqube</p>
<p><a href="http://www.sonarqube.org/" target="_blank" rel="noopener">SonarQube</a>® is an automatic code review tool to detect bugs, vulnerabilities, and code smells in your code. It can integrate with your existing workflow to enable continuous code inspection across your project branches and pull requests.</p>
</blockquote>
<p>​	sonarqube在devops的ci/cd流程中的位置：</p>
<ul>
<li>gitlab负责代码的存储，分支管理等；</li>
<li>jenkins负责代码的构建、打包等；</li>
<li>sonarqube被jenkins调用，负责代码质量的检测；并生成代码质量报告给开发者，形成闭环，使得代码不断迭代；</li>
</ul>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201222180220475.png" alt="image-20201222180220475"></p>
<p>​	sonarqube可以检查的代码质量有如下方面：</p>
<ul>
<li>代码的复杂度：复杂度过高难以理解；</li>
<li>重复代码：</li>
<li>单元测试统计：</li>
<li>代码规则检查：</li>
<li>注释率：</li>
<li>潜在的bug：</li>
<li>结构与设计：</li>
</ul>
<h1 id="sonarqube部署"><a href="#sonarqube部署" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:sonarqube部署" class="headings">sonarqube部署</a></h1>
<h2 id="sonarqube依赖环境部署"><a href="#sonarqube依赖环境部署" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:sonarqube依赖环境部署" class="headings">sonarqube依赖环境部署</a></h2>
<p>​	sonarqube依赖mysql数据库存储代码分析结果，需要java环境来运行；（但需要注意：sonarqube 7.x版本后不再支持mysql数据库，本实验采用sonarqube 6.7版本）</p>
<p><strong>sonarqube6.7版本的3个主要依赖：</strong></p>
<p><a href="https://docs.sonarqube.org/6.7/Requirements.html" target="_blank" rel="noopener">https://docs.sonarqube.org/6.7/Requirements.html</a></p>
<ul>
<li>mysql需要5.6或5.7</li>
<li>jdk需要jdk8版本</li>
<li>内核参数设置</li>
</ul>
<h3 id="mysql安装"><a href="#mysql安装" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:mysql安装" class="headings">mysql安装</a></h3>
<ol>
<li>
<p>配置mysql5.7的yum源</p>
<pre><code> rpm -ivh https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm
</code></pre></li>
<li>
<p>安装mysql5.7</p>
<pre><code>[root@jenkins-1 src]# yum -y install mysql-community-server
[root@jenkins-1 src]# systemctl start mysqld
</code></pre></li>
<li>
<p>找到生成的临时密码，启动mysql5.7并连接测试</p>
<pre><code>[root@jenkins-1 src]# grep &quot;temp&quot; /var/log/mysqld.log 
2020-12-22T10:45:40.852071Z 1 [Note] A temporary password is generated for root@localhost: bbwp9ytKy*q(
2020-12-22T10:45:43.300975Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
   
</code></pre></li>
<li>
<p>执行安全加固脚本</p>
<pre><code>[root@jenkins-1 src]# mysql_secure_installation
   
[root@jenkins-1 src]# mysql -uroot -p新密码
</code></pre></li>
<li>
<p>修改my.cnf中默认的数据库编码为utf-8，重启mysql</p>
<pre><code>[root@jenkins-1 src]# vim /etc/my.cnf
[mysqld]
collation-server = utf8_unicode_ci
init-connect='SET NAMES utf8'
character-set-server = utf8
   
[root@jenkins-1 src]# systemctl restart mysqld
   
</code></pre></li>
<li>
<p>创建sonar数据库，供给sonarqube使用</p>
<pre><code>mysql&gt; create database sonar default character set utf8 collate utf8_general_ci;
</code></pre></li>
<li>
<p>创建sonar账户，授予对sonar库的所有权限</p>
<pre><code>mysql&gt; grant all on sonar.* to 'sonar'@'%' identified by '123456';
   
# 实验中：123456无法通过密码复杂度验证，需换个复杂的；
</code></pre></li>
<li>
<p>用sonar账户连接测试</p>
<pre><code>[root@jenkins-1 ~]# mysql -usonar -p123456
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4
Server version: 5.7.32 MySQL Community Server (GPL)
   
   
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| sonar              |
+--------------------+
   
</code></pre></li>
</ol>
<h3 id="jdk安装"><a href="#jdk安装" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:jdk安装" class="headings">jdk安装</a></h3>
<ol>
<li>安装openjdk1.8</li>
<li>配置java_home环境变量</li>
<li>此处采用jenkins同台机器，所以jdk环境已经存在</li>
</ol>
<h3 id="内核参数调整"><a href="#内核参数调整" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:内核参数调整" class="headings">内核参数调整</a></h3>
<p>参考：https://docs.sonarqube.org/6.7/Requirements.html#src-11634463_Requirements-Kernelparameters</p>
<pre><code>
[root@jenkins-1 ~]# vim /etc/sysctl.conf 
vm.max_map_count=262144
fs.file-max=65536

[root@jenkins-1 ~]# vim /etc/security/limits.conf 
sonarqube	-	nofile	65536
sonarqube	-	nproc	2048

</code></pre><h2 id="安装sonarqube"><a href="#安装sonarqube" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:安装sonarqube" class="headings">安装sonarqube</a></h2>
<blockquote>
<p>sonarqube需要elasticsearch做代码的检索，且默认以普通用户启动</p>
</blockquote>
<ol>
<li>
<p>下载sonarqube6.7版本的程序包；</p>
<pre><code>wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-6.7.7.zip
</code></pre></li>
<li>
<p>解压并做软链接；</p>
<pre><code>[root@jenkins-1 src]# unzip sonarqube-6.7.7.zip 
   
[root@jenkins-1 src]# ln -sv /usr/local/src/sonarqube-6.7.7 /usr/local/sonar
‘/usr/local/sonar’ -&gt; ‘/usr/local/src/sonarqube-6.7.7’
</code></pre></li>
<li>
<p>创建sonarqube用户，更改目录属主为sonarqube</p>
<pre><code>[root@jenkins-1 ~]# useradd -s /bin/bash -m sonarqube
[root@jenkins-1 ~]# id sonarqube
uid=1000(sonarqube) gid=1000(sonarqube) groups=1000(sonarqube) 
   
[root@jenkins-1 src]# chown -R sonarqube.sonarqube /usr/local/src/sonarqube-6.7.7
   
</code></pre></li>
<li>
<p>切换为sonarqube用户</p>
<pre><code>[root@jenkins-1 src]# su - sonarqube
</code></pre><ol>
<li>
<p>并修改配置文件，配置mysql连接信息；</p>
<pre><code>[sonarqube@jenkins-1 ~]$ vim /usr/local/sonar/conf/sonar.properties 
      
sonar.jdbc.username=sonar
sonar.jdbc.password=123456
      
sonar.jdbc.url=jdbc:mysql://localhost:3306/sonar?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true&amp;useConfigs=maxPerformance&amp;useSSL=false
      
</code></pre></li>
<li>
<p>修改监听端口（可选）</p>
<pre><code>sonar.web.host=0.0.0.0
      
      
sonar.web.port=9000
      
</code></pre></li>
<li>
<p>以sonarqube用户身份，启动sonarqube</p>
<pre><code>[sonarqube@jenkins-1 ~]$ /usr/local/sonar/bin/linux-x86-64/sonar.sh start
      
</code></pre></li>
<li>
<p>查看日志，验证是否成功启动</p>
<p>实验中：因内存不足，启动失败一次；调整内存后，重启启动成功；</p>
<pre><code>[root@jenkins-1 ~]# tailf /usr/local/sonar/logs/sonar.log 
Launching a JVM...
      
2020.12.22 19:07:03 INFO  app[][o.s.a.SchedulerImpl] Process[ce] is up
2020.12.22 19:07:03 INFO  app[][o.s.a.SchedulerImpl] SonarQube is up
      
</code></pre></li>
</ol>
</li>
<li>
<p>登陆web界面；默认用户名密码：admin/admin</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201222190734210.png" alt="image-20201222190734210"></p>
</li>
<li>
<p>安装中文插件</p>
<p>方法1：界面安装，</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201222191031455.png" alt="image-20201222191031455"></p>
<p>方法2：后台安装，直接将jar包下载到sonarqube的插件目录，然后重启即可</p>
<pre><code>[sonarqube@jenkins-1 plugins]$ cd /usr/local/sonar/extensions/plugins/
   
[sonarqube@jenkins-1 plugins]$ wget https://github.com/xuhuisheng/sonar-l10n-zh/releases/download/sonar-l10n-zh-plugin-1.11/sonar-l10n-zh-plugin-1.11.jar
   
[sonarqube@jenkins-1 plugins]$ /usr/local/sonar/bin/linux-x86-64/sonar.sh restart
   
</code></pre></li>
<li>
<p>重启sonarqube，确认已经更换到中文</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201222191730490.png" alt="image-20201222191730490"></p>
</li>
<li>
<p>加入到开机启动中</p>
<pre><code>[root@jenkins-1 ~]# tailf /etc/rc.local 
   
su - sonarqube -c &quot;/usr/local/sonar/bin/linux-x86-64/sonar.sh start&quot;
   
</code></pre></li>
<li>
<p>安装其他插件：（sonarqube依靠插件实现对代码的扫描功能）如java、php、python、</p>
<p>根据需要搜索，安装即可</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223142508638.png" alt="image-20201223142508638"></p>
</li>
</ol>
<h2 id="安装sonar-scanner"><a href="#安装sonar-scanner" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:安装sonar-scanner" class="headings">安装sonar-scanner</a></h2>
<p><strong>sonarqube调用sonar-scanner对代码进行质量分析，</strong></p>
<h3 id="安装sonar-scanner-1"><a href="#安装sonar-scanner-1" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:安装sonar-scanner-1" class="headings">安装sonar-scanner</a></h3>
<p><a href="https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/" target="_blank" rel="noopener">下载地址</a></p>
<p><a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/" target="_blank" rel="noopener">官方文档</a></p>
<ol>
<li>
<p>下载sonar-scanner的包</p>
<pre><code>1，下载，解压，做软链接
[root@jenkins-1 src]# wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.0.0.1744-linux.zip
unzip sonar-scanner-cli-4.0.0.1744-linux.zip 
ln -sv /usr/local/src/sonar-scanner-4.0.0.1744-linux/ /usr/local/sonar-scanner
   
2，进入解压后目录，修改配置文件，指明sonar服务器的地址和编码2项
cd /usr/local/sonar-scanner/
vim conf/sonar-scanner.properties 
#----- Default SonarQube server
sonar.host.url=http://localhost:9000
   
#----- Default source code encoding
sonar.sourceEncoding=UTF-8
   
   
3，配置sonar的命令到PATH变量中；
vim /etc/profile.d/sonar-scanner.sh
[root@jenkins-1 sonarqube-scanner]# cat /etc/profile.d/sonar-scanner.sh 
export PATH=/usr/local/sonar-scanner/bin:$PATH
source /etc/profile.d/sonar-scanner.sh
   
4，验证sonar-scanner命令，
sonar-scanner命令要在具有sonar-project.properties，和src目录的目录下直接执行即可开始扫描目录下代码，（一般情况）
[root@jenkins-1 sonarqube-scanner]# sonar-scanner -h
INFO: 
INFO: usage: sonar-scanner [options]
INFO: 
INFO: Options:
INFO:  -D,--define &lt;arg&gt;     Define property
INFO:  -h,--help             Display help information
INFO:  -v,--version          Display version information
INFO:  -X,--debug            Produce execution debug output
</code></pre></li>
</ol>
<h3 id="准备测试代码"><a href="#准备测试代码" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:准备测试代码" class="headings">准备测试代码</a></h3>
<ol>
<li>
<p>下载测试代码</p>
<pre><code>wget https://github.com/SonarSource/sonar-scanning-examples/archive/master.zip
unzip master.zip
   
[root@jenkins-1 src]# pwd
/usr/local/src
[root@jenkins-1 src]# ll -rt
drwxr-xr-x 12 root      root           4096 Dec 22 16:06 sonar-scanning-examples-master
-rw-r--r--  1 root      root         254870 Dec 23 14:49 master.zip
   
# 进入解压后目录，找到sonar-project.properties文件所在目录，即是用来执行sonar-scanner进行扫描的目录
[root@jenkins-1 src]# cd sonar-scanning-examples-master/sonarqube-scanner
[root@jenkins-1 sonarqube-scanner]# ls
copybooks  coverage-report  sonar-project.properties  src
</code></pre></li>
</ol>
<h3 id="执行扫描"><a href="#执行扫描" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:执行扫描" class="headings">执行扫描</a></h3>
<ol>
<li>
<p>进入sonar-project.properties配置文件所在目录，按照需要修改该配置文件</p>
<pre><code>[root@jenkins-1 sonarqube-scanner]# pwd
/usr/local/src/sonar-scanning-examples-master/sonarqube-scanner
[root@jenkins-1 sonarqube-scanner]# ls
copybooks  coverage-report  sonar-project.properties  src
   
# sonar-project.properties为配置文件，定义如何扫描，扫描的代码路径，该次扫描的名称等
# src为要扫描的源代码目录
   
# 默认的配置即可使用，也可按需修改
[root@jenkins-1 sonarqube-scanner]# cat sonar-project.properties 
sonar.projectKey=org.sonarqube:sonarqube-scanner
sonar.projectName=Example of SonarQube Scanner Usage
sonar.projectVersion=1.0
   
sonar.sources=src,copybooks
   
sonar.sourceEncoding=UTF-8
   
## Cobol Specific Properties
   
# comma-separated paths to directories with copybooks
sonar.cobol.copy.directories=copybooks
# comma-separated list of suffixes
sonar.cobol.file.suffixes=cbl,cpy
sonar.cobol.copy.suffixes=cpy
   
   
   
## Flex Specific Properties
   
# retrieve code coverage data from the Cobertura report
sonar.flex.cobertura.reportPath=coverage-report/coverage-cobertua-flex.xml
   
   
   
# PL/I Specific Properties
sonar.pli.marginLeft=2
sonar.pli.marginRight=0
</code></pre></li>
<li>
<p>执行sonar-scanner命令即可开始扫描</p>
<pre><code>[root@jenkins-1 sonarqube-scanner]# sonar-scanner
</code></pre></li>
<li>
<p>命令输出结果</p>
<pre><code>[root@jenkins-1 sonarqube-scanner]# sonar-scanner
INFO: Scanner configuration file: /usr/local/src/sonar-scanner-4.0.0.1744-linux/conf/sonar-scanner.properties
INFO: Project root configuration file: /usr/local/src/sonar-scanning-examples-master/sonarqube-scanner/sonar-project.properties
INFO: SonarQube Scanner 4.0.0.1744
INFO: Java 11.0.3 AdoptOpenJDK (64-bit)
INFO: Linux 3.10.0-1160.6.1.el7.x86_64 amd64
INFO: User cache: /root/.sonar/cache
INFO: SonarQube server 6.7.7
INFO: Default locale: &quot;en_US&quot;, source code encoding: &quot;UTF-8&quot;
.........
-------------  Scan Example of SonarQube Scanner Usage
   
INFO: Analysis report generated in 218ms, dir size=91 KB
INFO: Analysis reports compressed in 63ms, zip size=42 KB
INFO: Analysis report uploaded in 500ms
INFO: ANALYSIS SUCCESSFUL, you can browse http://localhost:9000/dashboard/index/org.sonarqube:sonarqube-scanner
INFO: Note that you will be able to access the updated dashboard once the server has processed the submitted analysis report
INFO: More about the report processing at http://localhost:9000/api/ce/task?id=AXaOscnp3z5hMH_aiW9O
INFO: Task total time: 9.189 s
INFO: ------------------------------------------------------------------------
INFO: EXECUTION SUCCESS
INFO: ------------------------------------------------------------------------
INFO: Total time: 13.937s
INFO: Final Memory: 7M/27M
INFO: ------------------------------------------------------------------------
</code></pre></li>
<li>
<p>web界面查看扫描结果</p>
</li>
</ol>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223162403719.png" alt="image-20201223162403719"></p>
<h3 id="jenkins关联到sonarqube"><a href="#jenkins关联到sonarqube" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:jenkins关联到sonarqube" class="headings">Jenkins关联到sonarqube</a></h3>
<ol>
<li>
<p>安装sonarqube-scanner插件</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223165753498.png" alt="image-20201223165753498"></p>
</li>
<li>
<p>系统管理-》系统设置-》sonarqube servers：添加配置sonarqube servers的url地址</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223171213755.png" alt="image-20201223171213755"></p>
</li>
<li>
<p>系统管理-》全局工具配置：手动添加sonarqube scanner的扫描器（指明sonar scanner的命令路径）</p>
<p>也可以勾选自动安装，Jenkins会自动下载需要版本的scanner</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223171352712.png" alt="image-20201223171352712"></p>
</li>
</ol>
<h3 id="构建jenkins项目测试sonar-scanner"><a href="#构建jenkins项目测试sonar-scanner" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:构建jenkins项目测试sonar-scanner" class="headings">构建Jenkins项目测试sonar-scanner</a></h3>
<ol>
<li>
<p>创建一个Jenkins 自由风格的job，指明一个代码的gitlab仓库地址；</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223171515299.png" alt="image-20201223171515299"></p>
</li>
<li>
<p>正常写构建脚本：构建-》excute shell</p>
<pre><code>cd /var/lib/jenkins/workspace/test-sonar-1
tar -czvf web1.tar.gz index.jsp
scp web1.tar.gz root@192.168.80.104:/usr/local/tomcat/webapps/ROOT/
scp web1.tar.gz root@192.168.80.105:/usr/local/tomcat/webapps/ROOT/
   
ssh root@192.168.80.104 &quot;catalina.sh stop &amp;&amp; tar -xf /usr/local/tomcat/webapps/ROOT/web1.tar.gz -C /tmp/ &amp;&amp; cp -a /tmp/index.jsp /usr/local/tomcat/webapps/ROOT/index.jsp&quot;
ssh root@192.168.80.105 &quot;catalina.sh stop &amp;&amp; tar -xf /usr/local/tomcat/webapps/ROOT/web1.tar.gz -C /tmp/ &amp;&amp; cp -a /tmp/index.jsp /usr/local/tomcat/webapps/ROOT/index.jsp&quot;
   
ssh root@192.168.80.104 &quot;catalina.sh start&quot;
ssh root@192.168.80.105 &quot;catalina.sh start&quot;
</code></pre></li>
<li>
<p>在配置job时，选择构建-》excute sonarqube scanner，并添加配置文件sonar-project.properties格式</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223180757468.png" alt="image-20201223180757468"></p>
</li>
<li>
<p>保存后点击立即构建</p>
</li>
<li>
<p>查看控制台输出</p>
<p>首次失败，原因如下：报错找不到sonar-scanner，排查控制台输出时可以看到，是之前实验中配置的slave1节点执行的该job，但是slave1节点并没有sonar-scanner环境，所以报错；</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223172338708.png" alt="image-20201223172338708"></p>
<p>删除slave1节点后，使得其只能在具有scanner环境的master节点执行，再次执行就成功，</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223175834072.png" alt="image-20201223175834072"></p>
</li>
<li>
<p>查看生成的sonarqube图标，（链接到该该扫描项目在sonarqube上的url地址）</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223175904259.png" alt="image-20201223175904259"></p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223175913738.png" alt="image-20201223175913738"></p>
</li>
<li>
<p>查看tomcat是否更新</p>
<p><img src="https://gitee.com/boogie96/img/raw/master/img/image-20201223180613796.png" alt="image-20201223180613796"></p>
</li>
</ol>

            </div>

            
    
    
        <ul class="post-copyright">
            <li class="copyright-item author"><span class="copyright-item-text">作者</span>：<a href="latteStudio.github.io" class="p-author h-card" target="_blank" rel="noopener">latteStudio</a></li>
            
                
                
                
                
                <li class="copyright-item link"><span class="copyright-item-text">链接</span>：<a href="/posts/jenkins%E9%9B%86%E6%88%90sonarqube%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5/" target="_blank" rel="noopener">https://latteStudio.github.io/posts/jenkins集成sonarqube代码审查/</a></li>
            
            <li class="copyright-item license"><span class="copyright-item-text">许可</span>：<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></li>
            
        </ul>
    



        </article>

        

        
    <div class="updated-badge-container">
        <span title="Updated @ 2020-12-24 14:37:32 CST" style="cursor:help">

<svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2020-12-24</text><text x="915" y="140" textLength="650" transform="scale(.1)">2020-12-24</text></g></svg>
        </span></div>



        


        <div class="post-share">

        

        <div class="share-items">

            

            

            

            

            

            

            

            

            

        </div>

    </div>




        
    
    
        <div class="related-posts">
            <h2 class="related-title">相关文章：<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/></svg></h2>
            <ul class="related-list">
                
                    <li class="related-item">
                        <a href="/posts/jenkins%E4%B9%8Bpipline%E5%9F%BA%E7%A1%80/" class="related-link">jenkins之pipline基础</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/jenkins%E9%83%A8%E7%BD%B2%E5%8D%87%E7%BA%A7/" class="related-link">jenkins部署升级</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/gitlab%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D/" class="related-link">gitlab备份恢复</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/gitlab%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" class="related-link">gitlab权限管理</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/gitlab%E9%83%A8%E7%BD%B2/" class="related-link">gitlab部署</a>
                    </li>
                
            </ul>
        </div>
    



        
    
        <div class="post-tags">
            
                
                
                
                
                    
                    <a href="/tags/jenkins/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>jenkins</a>
                
            
                
                
                
                
                    
                    <a href="/tags/ci/cd/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>ci/cd</a>
                
            
        </div>
    



        


        


        
    
        
        
    
    
    
    
        <ul class="post-nav">
            
                <li class="post-nav-prev">
                    <a href="/posts/go%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="prev">&lt; go开发环境搭建</a>
                </li>
            
            
                <li class="post-nav-next">
                    <a href="/posts/jenkins%E4%B9%8Bpipline%E5%9F%BA%E7%A1%80/" rel="next">jenkins之pipline基础 &gt;</a>
                </li>
            
        </ul>
    



        
    

        <div class="load-comments">
            <div id="load-comments">加载评论</div>
        </div>

        

        
            <div id="vcomments"></div>
        

        

    



    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="site-info">©&nbsp;2019–2021&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;latteStudio</div><div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="noopener">MemE</a></div>

            


            
        </div>
    </footer>


        </div>
        

        






    

        

        
            <script>
    function loadComments() {
        if (typeof Valine === 'undefined') {
            var getScript = (options) => {
                var script = document.createElement('script');
                script.defer = true;
                script.crossOrigin = 'anonymous';
                Object.keys(options).forEach((key) => {
                    script[key] = options[key];
                });
                document.body.appendChild(script);
            };
            getScript({
                src: 'https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js',
                onload: () => {
                    newValine();
                }
            });
        } else {
            newValine();
        }
    }
    function newValine() {
        new Valine({
            el: '#vcomments',
            appId: '6hqsJkBQS3CRAfdMlpW9GsOJ-9Nh9j0Va',
            appKey: '2CubjtDJ17iVljqrpM0hGyhS',
            placeholder: 'Just go go',
            path: location.pathname,
            avatar: 'mm',
            meta: ["nick","mail","link"],
            pageSize:  10 ,
            lang: 'zh-cn',
            visitor:  false ,
            highlight:  true ,
            avatarForce:  false ,
            recordIP:  false ,
            serverURLs: '',
            emojiCDN: '',
            emojiMaps: {},
            enableQQ:  false ,
            requiredFields: []
        });
    }
</script>

        

        

    



    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js"></script>

<script>
    mediumZoom(document.querySelectorAll('div.post-body img'), {
        background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
    })
</script>




    <script src="https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js" type="module" defer></script>







    </body>
</html>
