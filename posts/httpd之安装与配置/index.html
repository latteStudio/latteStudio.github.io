<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.79.1" /><meta name="theme-color" content="#fff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>httpd之安装与配置 | latte Studio</title>

    <link rel="stylesheet" href="/css/meme.min.8a81df5e3f7eb67a8efa8e4c7ef0221c34298a277fc9e3d31209eb1eccd22213.css"/>

    
    
        <script src="/js/meme.min.ed0152d13f653ff21bf0e76a728fd6ae9b762c7a7bad8bc4eab82218fb602206.js"></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" /></noscript>

    <meta name="author" content="latteStudio" /><meta name="description" content="httpd的安装与配置..." />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="latte Studio" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="latte Studio" />
    <meta name="msapplication-starturl" content="../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://latteStudio.github.io/posts/httpd%E4%B9%8B%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2020-09-06T14:12:10+00:00",
        "dateModified": "2020-10-16T11:00:33+08:00",
        "url": "https://latteStudio.github.io/posts/httpd%E4%B9%8B%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/",
        "headline": "httpd之安装与配置",
        "description": "httpd的安装与配置...",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  8278 ,
        "image": "https://latteStudio.github.io/icons/apple-touch-icon.png",
        "author": {
            "@type": "Person",
            "description": "KISS——Keep it simple, stupid~",
            "email": "boogies@163.com",
            "image": "https://latteStudio.github.io/icons/apple-touch-icon.png",
            "url": "latteStudio.github.io",
            "name": "latteStudio"
        },
        "license": "[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)",
        "publisher": {
            "@type": "Organization",
            "name": "latte Studio",
            "logo": {
                "@type": "ImageObject",
                "url": "https://latteStudio.github.io/icons/apple-touch-icon.png"
            },
            "url": "https://latteStudio.github.io/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://latteStudio.github.io/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary" />


    



<meta property="og:title" content="httpd之安装与配置" />
<meta property="og:description" content="httpd的安装与配置..." />
<meta property="og:url" content="https://latteStudio.github.io/posts/httpd%E4%B9%8B%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" />
<meta property="og:site_name" content="latte Studio" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://latteStudio.github.io/icons/apple-touch-icon.png" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-09-06T14:12:10&#43;00:00" />
    <meta property="article:modified_time" content="2020-10-16T11:00:33&#43;08:00" />
    
    <meta property="article:section" content="posts" />



    
</head>

    <body>
        <div class="container">
            
    <header class="header">
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="/" class="brand">latte Studio</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="/posts/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class="menu-item-name">归档</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon th"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg><span class="menu-item-name">分类</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/tags/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg><span class="menu-item-name">标签</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/about/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class="menu-item-name">关于</span></a>
                </li>
            
        
            
                
                    
                    
                        <li class="menu-item">
                            <a id="theme-switcher" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5l48.8-97.5a18 18 0 0128 0l48.8 97.5 103.4 -34.5a18 18 0 0119.8 19.8l-34.5 103.4l97.5 48.8a18 18 0 010 28l-97.5 48.8 34.5 103.4a18 18 0 01-19.8 19.8l-103.4-34.5-48.8 97.5a18 18 0 01-28 0l-48.8-97.5l-103.4 34.5a18 18 0 01-19.8-19.8l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8-34.5-103.4a18 18 0 0119.8-19.8zM256 128a128 128 0 10.01 0M256 160a96 96 0 10.01 0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412a256 256 0 10154-407a11.5 11.5 0 00-5 20a201.5 201.5 0 01-134 374a11.5 11.5 0 00-15 13"/></svg></a>
                        </li>
                    
                
            
        
            
                
            
        
    </ul>
</nav>

                    
                </div>
            </div>
            
    <input type="checkbox" id="nav-toggle" aria-hidden="true" />
    <label for="nav-toggle" class="nav-toggle"></label>
    <label for="nav-toggle" class="nav-curtain"></label>


        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="justify" data-type="posts" data-toc-num="true">

            <h1 class="post-title p-name">httpd之安装与配置</h1>

            

            
                <div class="post-description p-summary">httpd的安装与配置...</div>
                
            

            
                

<div class="post-meta">
    
        
        <time datetime="2020-09-06T14:12:10&#43;00:00" class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>&nbsp;2020.9.6</time>
    
    
        
        <time datetime="2020-10-16T11:00:33&#43;08:00" class="post-meta-item modified dt-updated"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2020.10.16</time>
    
    
    
        
        
        
            
                <span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href="/categories/%E8%BF%90%E7%BB%B4/" class="category-link p-category">运维</a>/<a href="/categories/web%E6%9C%8D%E5%8A%A1/" class="category-link p-category">web服务</a></span>
            
        
    
    
        
        <span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;8278</span>
    
    
        
        <span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;17&nbsp;分钟</span>
    
    
        
            
            <span class="post-meta-item busuanzi-page-pv" id="busuanzi_container_page_pv"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon post-meta-icon"><path d="M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"/></svg>&nbsp;<span id="busuanzi_value_page_pv"></span></span>
        
    
    
</div>

            

            <nav class="contents">
  <h2 id="contents" class="contents-title">目录</h2><ol class="toc">
    <li><a id="contents:yum安装" href="#yum安装"><strong>yum安装</strong></a></li>
    <li><a id="contents:编译安装" href="#编译安装">编译安装</a></li>
    <li><a id="contents:httpd编译第三方模块" href="#httpd编译第三方模块">httpd编译第三方模块</a></li>
  </ol>

  <ol>
    <li><a id="contents:编译安装目录结构" href="#编译安装目录结构">编译安装目录结构</a></li>
    <li><a id="contents:yum安装目录结构" href="#yum安装目录结构">yum安装目录结构</a></li>
    <li><a id="contents:编译模块查看" href="#编译模块查看">编译模块查看</a></li>
    <li><a id="contents:httpdapachectl管理命令" href="#httpdapachectl管理命令">httpd/apachectl管理命令</a></li>
  </ol>

  <ol>
    <li><a id="contents:httpdconf" href="#httpdconf">httpd.conf</a></li>
    <li><a id="contents:prefork参数" href="#prefork参数">prefork参数</a></li>
    <li><a id="contents:worker参数" href="#worker参数">worker参数</a></li>
    <li><a id="contents:配置文件常见指令" href="#配置文件常见指令">配置文件常见指令</a></li>
    <li><a id="contents:容器类指令" href="#容器类指令">容器类指令</a></li>
    <li><a id="contents:配置文件合并规则" href="#配置文件合并规则">配置文件合并规则</a></li>
  </ol>
</nav><div class="post-body e-content">
              <h1 id="安装"><a href="#安装" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:安装" class="headings">安装</a></h1>
<h2 id="yum安装"><a href="#yum安装" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:yum安装" class="headings"><strong>yum安装</strong></a></h2>
<pre><code>yum install -y httpd
直接安装即可，共计安装5个rpm包；

systemctl enable httpd; systemctl start httpd
启动，开机自启动
</code></pre><h2 id="编译安装"><a href="#编译安装" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:编译安装" class="headings">编译安装</a></h2>
<p>官方文档：http://httpd.apache.org/docs/2.4/install.html</p>
<ol>
<li>安装依赖包，编译工具</li>
<li>configure、make、make install 三步走</li>
<li>安装后配置
<ol>
<li>PATH变量、</li>
<li>man文件、头文件、库文件、[可选]</li>
<li>单独的网页文件存放目录，（一般单独挂载高可用的存储设备，或nfs共享）</li>
<li>添加apache用户</li>
<li>服务脚本、配置文件准备</li>
</ol>
</li>
</ol>
<p>1，安装依赖包，编译安装apr和apr-utils</p>
<pre><code># 安装依赖包，编译工具
# 包含pcre正则，expat和xml相关的包，会被httpd应用到
[root@host2 ~]# yum install -y pcre-devel expat-devel pcre gcc gcc++

# 编译安装apr
[root@host2 apr-1.6.2]# ./configure --prefix=/usr/local/apr
[root@host2 apr-1.6.2]# make &amp;&amp; make install
[root@host2 apr-1.6.2]# ll /usr/local/apr/
total 0
drwxr-xr-x 2 root root  26 Aug 31 19:40 bin
drwxr-xr-x 2 root root 148 Aug 31 19:40 build-1
drwxr-xr-x 3 root root  19 Aug 31 19:40 include
drwxr-xr-x 3 root root 140 Aug 31 19:40 lib


# 编译安装apr-utils，需要在apr之后！
configure: error: APR could not be located. Please use the --with-apr option.
[root@host2 apr-util-1.6.1]# ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr/
[root@host2 apr-util-1.6.1]# make &amp;&amp; make install
[root@host2 apr-util-1.6.1]# ll /usr/local/apr-util/
total 0
drwxr-xr-x 2 root root  26 Aug 31 19:42 bin
drwxr-xr-x 3 root root  19 Aug 31 19:42 include
drwxr-xr-x 3 root root 164 Aug 31 19:42 lib

</code></pre><p>2，三步走</p>
<p>常见编译选项</p>
<pre><code>./configure -h
...
# 查看选项，编译时应该根据实际需求选择


prefix 
程序安装路径

sysconfdir 
配置文件路径，非必须，不指定默认是prefix目录下的conf目录

#
  --enable-mpms-shared=MPM-LIST
  
  
  --with-mpm=MPM          Choose the process model for Apache to use by
                          unless --enable-mpms-shared is also specified.
单独此项，为静态编译一个mpm模型，这样mpm就选死了；
# 
--with-mpm=MPM
mpm模型三选一，如果选择是只静态编译一种mpm模型，则需要更换其他模型时，必须重新编译！
较好方式：3个都动态编译，指定一个为默认，其他2个还可以随时切换；
示例如下：意思是3种动态模型都动态编译，默认为event，安装后还可以用LoadModule指令可以切换其他2种模型
--with-mpm=event --enable-mpms-shared=all

with-z zlib
压缩启用
with-pcre 
正则启用
with-apr
with-apr-utils
启用Apache Portable Runtime：为应用提供通用运行时环境

# 编译时，动态编译了3种mpm模型后，可以在模块目录看到对应的3种动态模块
[root@host2 httpd-2.4.27]# ll /usr/local/apache/modules/ |grep mpm
-rwxr-xr-x 1 apache apache 191360 Aug 18 19:35 mod_mpm_event.so
-rwxr-xr-x 1 apache apache  88720 Aug 18 19:35 mod_mpm_prefork.so
-rwxr-xr-x 1 apache apache 137424 Aug 18 19:35 mod_mpm_worker.so


configure选项中：
--disable-xx默认是开启的模块
--enable-xx默认是关闭的模块
</code></pre><p><strong>动态/静态编译的区别</strong></p>
<ul>
<li>静态static编译：编译时，把模块编译到核心模块里面，随着核心模块启动而启动，<strong>也就是说和httpd进程的生命周期一致</strong></li>
<li>静态shared编译：把模块编译为二进制文件，但是不随着核心模块启动而启动，而是需要的时候，用LoadModule指令引用；<strong>所谓动态，即需要增减的时候，用LoadMoudule加载或注释掉需要的模块，然后发送HUP信号，重读配置文件即实现模块的动态装载或卸载</strong></li>
</ul>
<p>--enable-so：启用so模块，默认启用，默认静态编译，指定为动态选择不生效</p>
<pre><code>[root@host2 httpd-2.4.27]# httpd -M
Loaded Modules:
 core_module (static)
 so_module (static)
 http_module (static)

一定静态编译的模块so_module,这个模块才使得httpd有了动态装载、卸载模块的能力；
DSO：dymanic shared object 动态共享模块对象；
</code></pre><p>3，开始编译</p>
<pre><code># 进入解压后目录，三步走；
# 三种mpm都动态编译，默认用event；启用pcre正则、apr跨平台、启用zlib压缩
[root@host2 httpd-2.4.27]# ./configure --prefix=/usr/local/apache --with-z --with-pcre --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util/ --with-mpm=event --enable-mpms-shared=all

[root@host2 httpd-2.4.27]# make &amp;&amp; make install

# 安装后测试
[root@host2 httpd-2.4.27]# /usr/local/apache/bin/httpd -t
Syntax OK
[root@host2 httpd-2.4.27]# /usr/local/apache/bin/httpd -k start
[root@host2 httpd-2.4.27]# curl localhost
&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;
</code></pre><p>4，编译安装后配置</p>
<pre><code># path变量配置
[root@host2 httpd-2.4.27]# cat /etc/profile.d/httpd.sh
export PATH=/usr/local/apache/bin:$PATH
[root@host2 httpd-2.4.27]# source !$
source /etc/profile.d/httpd.sh

# 改httpd的进程启动用户，默认为nobody
[root@host2 httpd-2.4.27]# useradd apache
[root@host2 httpd-2.4.27]# id apache
uid=1000(apache) gid=1000(apache) groups=1000(apache)

[root@host2 apache]# vim conf/httpd.conf 
	...
	User apache
	Group apche
	...
[root@host2 apache]# apachectl -k restart

# 服务脚本准备
实验时，从yum安装中复制过来，然后修改的服务脚本有点问题，无法关闭进程
# 解决方法：命令行方式管理httpd进程，
apachectl脚本，或httpd即可完成程序的启停；
# 再结合利用/etc/rc.local可以实现开机自启动
</code></pre><p>以下：非必须配置，但path变量一般都需要配置</p>
<pre><code>
--
manpath配置
echo &quot;MANPATH /usr/local/apache/man&quot; &gt;&gt; /etc/man.config

--
path配置
echo &quot;PATH=/usr/local/apache/bin:$PATH&quot; &gt;&gt; /etc/profile.d/apache.sh
source /etc/profile.d/apache.sh 


--
头文件引用？
ln -s /usr/include /usr/local/apache/include

service编写，用yum安装的修改即可；
EnvironmentFile=/etc/sysconfig/httpd
ExecStart=/usr/local/apache/bin/httpd $OPTIONS -k start -DFOREGROUND
ExecReload=/usr/local/apache/bin/httpd $OPTIONS -k graceful
ExecStop=/bin/kill -WINCH ${MAINPID}
主要改了httpd进程的路径；
能启动，能访问，但是启动、关闭，都卡住？如果是命令正常，应该是service文件问题；编译没问题；
</code></pre><h2 id="httpd编译第三方模块"><a href="#httpd编译第三方模块" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:httpd编译第三方模块" class="headings">httpd编译第三方模块</a></h2>
<p>下载httpd-devel包，依赖apxs命令</p>
<pre><code># apxs命令可以帮助编译httpd模块，编译安装时自带该命令；yum安装时，属于httpd-devel包命令

详细看man手册
[root@host2 modules]# apxs 
Usage: apxs -g [-S &lt;var&gt;=&lt;val&gt;] -n &lt;modname&gt;
       apxs -q [-v] [-S &lt;var&gt;=&lt;val&gt;] [&lt;query&gt; ...]
       apxs -c [-S &lt;var&gt;=&lt;val&gt;] [-o &lt;dsofile&gt;] [-D &lt;name&gt;[=&lt;value&gt;]]
               [-I &lt;incdir&gt;] [-L &lt;libdir&gt;] [-l &lt;libname&gt;] [-Wc,&lt;flags&gt;]
               [-Wl,&lt;flags&gt;] [-p] &lt;files&gt; ...
       apxs -i [-S &lt;var&gt;=&lt;val&gt;] [-a] [-A] [-n &lt;modname&gt;] &lt;dsofile&gt; ...
       apxs -e [-S &lt;var&gt;=&lt;val&gt;] [-a] [-A] [-n &lt;modname&gt;] &lt;dsofile&gt; ...

示例：开始编译proxy代理模块
apxs -c -i -A /usr/local/src/httpd-2.4.7/modules/proxy/mod_proxy.c /usr/local/src/httpd-2.4.7/modules/proxy/proxy_util.c


...
[root@host2 apache]# ll modules/ |grep proxy.so
-rwxr-xr-x 1 root root 373872 Aug 31 19:47 mod_proxy.so
# 查看现有proxy模块；

[root@host2 apache]# mv modules/mod_proxy.so /root/
[root@host2 apache]# ll modules/ |grep proxy.so
# 将proxy模块移走；

[root@host2 apache]# apxs -c -i -A /root/httpd-2.4.27/modules/proxy/mod_proxy.c /root/httpd-2.4.27/modules/proxy/proxy_util.c 
/usr/local/apr/build-1/libtool --silent --mode=compile gcc -std=gnu99 -prefer-pic   -DLINUX -D_REENTRANT -D_GNU_SOURCE -g -O2 -pthread -I/usr/local/apache/include  -I/usr/local/apr/include/apr-1   -I/usr/local/apr-util/include/apr-1   -c -o /root/httpd-2.4.27/modules/proxy/mod_proxy.lo /root/httpd-2.4.27/modules/proxy/mod_proxy.c &amp;&amp; touch /root/httpd-2.4.27/modules/proxy/mod_proxy.slo
...
# 开始编译

[root@host2 apache]# ll modules/ |grep mod_proxy.so
-rwxr-xr-x 1 root root 373920 Sep  1 10:22 mod_proxy.so #新模块

[root@host2 apache]# ll /root/mod_proxy.so 
-rwxr-xr-x 1 root root 373872 Aug 31 19:47 /root/mod_proxy.so #原有模块

# 编译后发现，已经有了新编译的proxy模块；和移走的老模块大小不完成一致，但不影响httpd运行；
</code></pre><h1 id="安装后目录结构"><a href="#安装后目录结构" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:安装后目录结构" class="headings">安装后目录结构</a></h1>
<h2 id="编译安装目录结构"><a href="#编译安装目录结构" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:编译安装目录结构" class="headings">编译安装目录结构</a></h2>
<pre><code># 安装后目录结构
[root@host2 httpd-2.4.27]# ll /usr/local/apache/
total 36
drwxr-xr-x  2 root root  262 Aug 31 19:47 bin # 程序目录
drwxr-xr-x  2 root root  167 Aug 31 19:47 build
drwxr-xr-x  2 root root   78 Aug 31 19:47 cgi-bin
drwxr-xr-x  4 root root   84 Aug 31 19:47 conf # 配置文件
drwxr-xr-x  3 root root 4096 Aug 31 19:47 error # http的多种语言支持的错误网页，400,500状态码时返回的页面
drwxr-xr-x  2 root root   24 Aug 31 19:47 htdocs # 网页文件根目录
drwxr-xr-x  3 root root 8192 Aug 31 19:47 icons # 图标
drwxr-xr-x  2 root root 4096 Aug 31 19:47 include # 头文件
drwxr-xr-x  2 root root    6 Aug 31 19:47 logs # 日志：包含access.log error.log httpd.pid，和nginx类似；
drwxr-xr-x  4 root root   30 Aug 31 19:47 man # man手册
drwxr-xr-x 14 root root 8192 Aug 31 19:47 manual
drwxr-xr-x  2 root root 4096 Aug 31 19:47 modules # 动态模块文件

# 程序目录
# 有httpd主程序；apachectl调用主程序脚本；ab压测工具，htpasswd密码文件创建工具；rotatelogs日志轮替工具；apxs为perl语言的脚本，可以帮助编译第三方模块；
[root@host2 httpd-2.4.27]# ll /usr/local/apache/bin/
total 2576
-rwxr-xr-x 1 root root   98608 Aug 31 19:47 ab
-rwxr-xr-x 1 root root    3434 Aug 31 19:45 apachectl
-rwxr-xr-x 1 root root   23514 Aug 31 19:45 apxs
-rwxr-xr-x 1 root root   13144 Aug 31 19:47 checkgid
-rwxr-xr-x 1 root root    8925 Aug 31 19:45 dbmmanage
-rw-r--r-- 1 root root    1071 Aug 31 19:45 envvars
-rw-r--r-- 1 root root    1071 Aug 31 19:45 envvars-std
-rwxr-xr-x 1 root root   23864 Aug 31 19:47 fcgistarter
-rwxr-xr-x 1 root root   79816 Aug 31 19:47 htcacheclean
-rwxr-xr-x 1 root root   47352 Aug 31 19:47 htdbm
-rwxr-xr-x 1 root root   25112 Aug 31 19:47 htdigest
-rwxr-xr-x 1 root root   49064 Aug 31 19:47 htpasswd
-rwxr-xr-x 1 root root 2134840 Aug 31 19:47 httpd
-rwxr-xr-x 1 root root   22024 Aug 31 19:47 httxt2dbm
-rwxr-xr-x 1 root root   25128 Aug 31 19:47 logresolve
-rwxr-xr-x 1 root root   41240 Aug 31 19:47 rotatelogs
</code></pre><h2 id="yum安装目录结构"><a href="#yum安装目录结构" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:yum安装目录结构" class="headings">yum安装目录结构</a></h2>
<pre><code>[root@host2 apache]# ll /etc/httpd/
total 0
drwxr-xr-x 2 root root  37 Sep  1 10:37 conf # 内有主配置文件的目录
drwxr-xr-x 2 root root  82 Sep  1 10:37 conf.d # 默认欢迎页面配置文件的目录
drwxr-xr-x 2 root root 146 Sep  1 10:37 conf.modules.d # 配置引用哪些动态模块的配置文件的目录
lrwxrwxrwx 1 root root  19 Sep  1 10:37 logs -&gt; ../../var/log/httpd # 日志文件
lrwxrwxrwx 1 root root  29 Sep  1 10:37 modules -&gt; ../../usr/lib64/httpd/modules # 模块文件目录
lrwxrwxrwx 1 root root  10 Sep  1 10:37 run -&gt; /run/httpd # pid文件目录
[root@host2 apache]# 

# yum安装时几个重要文件
/usr/sbin/httpd 主程序
/etc/httpd/conf/httpd.conf 主配置
/usr/lib/systemd/system/httpd.service 服务脚本
/var/www/html 网站文件根目录
/usr/lib64/httpd/modules/ 目录下的模块文件
</code></pre><h2 id="编译模块查看"><a href="#编译模块查看" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:编译模块查看" class="headings">编译模块查看</a></h2>
<pre><code>[root@host2 apache]# httpd -l
Compiled in modules:
  core.c
  mod_so.c
  http_core.c
[root@host2 apache]# httpd -M
Loaded Modules:
 core_module (static)
 so_module (static)
 http_module (static)
 authn_file_module (shared)
 authn_core_module (shared)
 ...
 #看出静态编译的有core，http_core，mod_so，其余为动态模块，通过LoadModule指令动态装载；可以在&lt;prefix&gt;/modules目录下找到；
</code></pre><h2 id="httpdapachectl管理命令"><a href="#httpdapachectl管理命令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:httpdapachectl管理命令" class="headings">httpd/apachectl管理命令</a></h2>
<pre><code>[root@localhost ~]# httpd -h
Usage: httpd [-D name] [-d directory] [-f file]
             [-C &quot;directive&quot;] [-c &quot;directive&quot;]
             [-k start|restart|graceful|graceful-stop|stop]
             [-v] [-V] [-h] [-l] [-L] [-t] [-T] [-S] [-X]


root@localhost ~]# apachectl -h
Usage: /usr/sbin/httpd [-D name] [-d directory] [-f file]
                       [-C &quot;directive&quot;] [-c &quot;directive&quot;]
                       [-k start|restart|graceful|graceful-stop|stop]
                       [-v] [-V] [-h] [-l] [-L] [-t] [-T] [-S] [-X]

此2个命令，可以管理httpd进程的启停，查看状态，程序版本，编译选项等；
apachectl是脚本，调用httpd，httpd是二进制程序
</code></pre><h1 id="配置文件与指令"><a href="#配置文件与指令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:配置文件与指令" class="headings">配置文件与指令</a></h1>
<p>2.4版本文档
<a href="http://httpd.apache.org/docs/2.4/" target="_blank" rel="noopener">http://httpd.apache.org/docs/2.4/</a></p>
<p>指令介绍文档
<a href="http://httpd.apache.org/docs/2.4/mod/directives.html" target="_blank" rel="noopener">http://httpd.apache.org/docs/2.4/mod/directives.html</a></p>
<h2 id="httpdconf"><a href="#httpdconf" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:httpdconf" class="headings">httpd.conf</a></h2>
<p>此为yum安装httpd配置文件</p>
<p><strong>目录权限的放行，2个方面：</strong></p>
<ul>
<li>directory指令内要放行</li>
<li>httpd进程用户如apache对目录有相应权限，一般改为属主即可</li>
</ul>
<pre><code>[root@host2 ~]# grep -vE &quot;^(.*#|^$)&quot; /etc/httpd/conf/httpd.conf
ServerRoot &quot;/etc/httpd&quot; 
程序根目录；

Listen 80
监听端口，可以写多行，多个端口；不写ip就是本机所有ip

Include conf.modules.d/*.conf
导入模块配置文件

User apache
Group apache
进程用户身份

ServerAdmin root@localhost
管理员邮箱

&lt;Directory /&gt;
    AllowOverride none
    Require all denied
&lt;/Directory&gt;
先把主机文件系统的根都禁止了，再根据需要放开小范围的子目录；

DocumentRoot &quot;/var/www/html&quot;
默认站点的网站文件根目录

&lt;Directory &quot;/var/www&quot;&gt;
    AllowOverride None
    Require all granted
&lt;/Directory&gt;
放开httpd进程对/var/www目录的访问；

&lt;Directory &quot;/var/www/html&quot;&gt;
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
&lt;/Directory&gt;
放开httpd进程对/var/www/html目录的访问；【仍需注意httpd进程用户如apache对改目录的权限；一般改为apache属主】

&lt;IfModule dir_module&gt;
    DirectoryIndex index.html
&lt;/IfModule&gt;
如果dir_module模块加载了，内部指令生效；全局的生效，可被覆盖！
指令作用，为设置访问目录时，默认返回的文件

&lt;Files &quot;.ht*&quot;&gt;
    Require all denied
&lt;/Files&gt;
禁用.ht文件的访问，全局的，可被覆盖；

ErrorLog &quot;logs/error_log&quot;
LogLevel warn
全局errolog日志路径，级别，可被覆盖
设置虚拟主机时，可以自定义自己的日志路径，级别，若不设置，默认都在该全局日志文件中


&lt;IfModule log_config_module&gt;
    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot; combined
    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; common
    &lt;IfModule logio_module&gt;
      LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot; %I %O&quot; combinedio
    &lt;/IfModule&gt;
    CustomLog &quot;logs/access_log&quot; combined
&lt;/IfModule&gt;
如果log_config_module加载了，内部指令生效，全局，可覆盖；可引用日志格式；
定义全局accesslog路径、格式，可覆盖
设置虚拟主机时，可以自定义自己的日志路径，级别，若不设置，默认都在该全局日志文件中

&lt;IfModule alias_module&gt;
    ScriptAlias /cgi-bin/ &quot;/var/www/cgi-bin/&quot;
&lt;/IfModule&gt;
如果alias_module加载了 内部指令生效；将对uri的访问，/cgi-bin/定向到文件系统的/var/www/cgi-bin/路径下寻找！
如访问www.a.com/cgi-bin/1.cgi时，寻找到的文件为文件系统上/var/www/cgin-bin/1.cgi


&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;
    AllowOverride None
    Options None
    Require all granted
&lt;/Directory&gt;
对文件系统目录/var/www/cgi-bin的放行，directory指令层面放行；

&lt;IfModule mime_module&gt;
    TypesConfig /etc/mime.types
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType text/html .shtml
    AddOutputFilter INCLUDES .shtml
&lt;/IfModule&gt;
若mime_module模块加载了，内部指令生效；
定义httpd支持，识别的文件类型

AddDefaultCharset UTF-8
默认编码

&lt;IfModule mime_magic_module&gt;
    MIMEMagicFile conf/magic
&lt;/IfModule&gt;


EnableSendfile on
开启sendfile，用于零复制，加速响应

IncludeOptional conf.d/*.conf
导入其他配置，如虚拟主机的配置
</code></pre><p>导入模块的配置文件，所在的目录</p>
<pre><code>[root@host2 conf.modules.d]# pwd
/etc/httpd/conf.modules.d
[root@host2 conf.modules.d]# ll
total 28
-rw-r--r-- 1 root root 3739 Nov 27  2019 00-base.conf
-rw-r--r-- 1 root root  139 Nov 27  2019 00-dav.conf
-rw-r--r-- 1 root root   41 Nov 27  2019 00-lua.conf
-rw-r--r-- 1 root root  742 Nov 27  2019 00-mpm.conf
-rw-r--r-- 1 root root  957 Nov 27  2019 00-proxy.conf
-rw-r--r-- 1 root root   88 Nov 27  2019 00-systemd.conf
-rw-r--r-- 1 root root  451 Nov 27  2019 01-cgi.conf
都是导入模块的配置文件；注意依赖性；分类写在不同的配置文件中；

conf.d下welcome.conf文件定义了默认的欢迎页面；
在/usr/share/httpd/noindex下；
</code></pre><pre><code>[root@host2 ~]# httpd -M |wc -l
83
3个静态，80个动态的，且启用的；
[root@host2 ~]# httpd -l
Compiled in modules:
  core.c
  mod_so.c
  http_core.c
[root@host2 ~]# 
l选项列出静态的模块，即：核心模块；so模块支持DSO动态模块的模块；http模块
[root@host2 conf.modules.d]# ll /usr/lib64/httpd/modules/ | grep -v &quot;total&quot;| wc -l
100
yum安装版本一共编译进了100个动态模块；3个静态的不在此目录；在主程序内部

LoadModule 指令，加载需要的模块，采用相对路径，不需要重启生效；模块有依赖关系；
</code></pre><h2 id="prefork参数"><a href="#prefork参数" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:prefork参数" class="headings">prefork参数</a></h2>
<pre><code>StartServers 8 启动时启动几个子进程；
MinSpareServers 5 最少空闲子进程
MaxSpareServers 30 最多空闲的子进程
ServerLimit 256 最多能开启的进程数
MaxClients 256 最大并发连接数；
MaxRequestsPerchild 4000 每个子进程处理最多4000次请求后就杀死，重启一个，为了稳定；

</code></pre><h2 id="worker参数"><a href="#worker参数" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:worker参数" class="headings">worker参数</a></h2>
<pre><code>ServerLimit 16最多进程数
StartServers 2 启动时启动的进程数；
MaxRequestWorkers 150 官方解释；
The MaxRequestWorkers directive sets the limit on the number of simultaneous requests that will be served. Any connection attempts over the MaxRequestWorkers limit will normally be queued, up to a number based on the ListenBacklog directive. Once a child process is freed at the end of a different request, the connection will then be serviced.

MinSpareThreads 25 整体最少空闲线程
MaxSpareThreads 75 整体最多空闲线程
ThreadsPerChild 25 每个worker子进程启动的线程数
</code></pre><h2 id="配置文件常见指令"><a href="#配置文件常见指令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:配置文件常见指令" class="headings">配置文件常见指令</a></h2>
<p>【配置文件中的常见指令是由一个个模块提供的代码实现，语法：指令：值——directive：values】</p>
<ul>
<li>Listen 监听端口</li>
<li>ServerRoot 程序根目录</li>
<li>DocumentRoot 网页文件根目录</li>
<li>Directoryindex 访问uri为目录时，默认返回的页面文件</li>
<li>ServerName 、ServerAlias 虚拟主机的主机名，别名；</li>
<li>Include 导入哪些配置文件</li>
<li>Define 、UnDefine  定义变量</li>
<li>VirtualHost 虚拟主机配置段</li>
<li>Options 、AllowOverride 定义目录属性等信息</li>
<li>Require</li>
<li>长连接相关指令</li>
</ul>
<p>Listen</p>
<pre><code>配置httpd监听的端口，可以加地址，不加默认是本机所有ip的端口；

 38 # Change this to Listen on specific IP addresses as shown below to 
 39 # prevent Apache from glomming onto all bound IP addresses.
 40 #
 41 #Listen 12.34.56.78:80
 42 Listen 80

</code></pre><p>ServerRoot</p>
<pre><code>ServerRoot 是指httpd程序的家目录，如果是编译安装，一般是在/usr/local/apache/
目录下有log，module等目录；

yum安装的默认是在/etc/httpd

 22 # ServerRoot: The top of the directory tree under which the server's
 23 # configuration, error, and log files are kept.
 24 #
 25 # Do not add a slash at the end of the directory path.  If you point
 26 # ServerRoot at a non-local disk, be sure to specify a local disk on the
 27 # Mutex directive, if file-based mutexes are used.  If you wish to share the
 28 # same ServerRoot for multiple httpd daemons, you will need to change at
 29 # least PidFile.
 30 #
 31 ServerRoot &quot;/etc/httpd&quot;

</code></pre><p>DocumentRoot</p>
<pre><code>是指静态页面文件所在的目录，yum安装的,默认主机的目录默认在 /var/www/html

每个虚拟主机都可以配置自己的DocumentRoot

/var/www/html是默认虚拟主机的网页文件根目录

115 # DocumentRoot: The directory out of which you will serve your
116 # documents. By default, all requests are taken from this directory, but
117 # symbolic links and aliases may be used to point to other locations.
118 #
119 DocumentRoot &quot;/var/www/html&quot;
</code></pre><p>Directoryindex</p>
<pre><code>配置的是：当url访问路径是以/结尾时，web会显示该目录下的那个具体文件；即访问的不是具体文件，是目录时，默认找该目录下哪个文件返回给客户端，可定义多个，根据次序寻找，找到即返回；

如访问http://1.1.1.1/dir1/时；


160 # DirectoryIndex: sets the file that Apache will serve if a directory
161 # is requested.
162 #
163 &lt;IfModule dir_module&gt;
164     DirectoryIndex  index.php index.xyz index.html
165 &lt;/IfModule&gt;

会依次寻找在${documentroot}目录下的dir1目录下的index.php index.xyz index.html，找到哪个就显示哪个


---
如果directoryindex定义的文件都没找到，此时又设置了 Options Indexes ，会列出当前目录的所有文件，仅限于充当下载服务器时，不然有安全隐患；
要点：
	1，要加入Options Indexes选项；
	2，该目录下要不存在定义的默认文件，index.html index.php index.htm等；
和nginx类似
	1，开启autoindex on选项；
	2，目录下不存在定义的默认文件，index.html index.php index.htm等；

&lt;directory /usr/local/apache/htdocs/dir1&gt;
	Options Indexes
	DirectoryIndex index.php index.html index.xyz
&lt;/directory&gt;
</code></pre><p>ServerName 、ServerAlias</p>
<pre><code> 89 # ServerName gives the name and port that the server uses to identify itself.
 90 # This can often be determined automatically, but we recommend you specify
 91 # it explicitly to prevent problems during startup.
 92 #
 93 # If your host doesn't have a registered DNS name, enter its IP address here.
 94 #
 95 #ServerName www.example.com:80

定义虚拟主机的主机名；没明确指定时，httpd默认的虚拟主机会集成当前主机的主机名
如localhost.localdomain

---
一般基于主机头的每个虚拟主机都会设置一个ServerName，至于ServerAlias是其小名；
&lt;VirtualHost *:80&gt;
	ServerName pc.bo.com
	ServerAlias pc pc-name
&lt;/VirtualHost&gt;



</code></pre><p>Include</p>
<pre><code> ---
 45 # Dynamic Shared Object (DSO) Support
 46 #
 47 # To be able to use the functionality of a module which was built as a DSO you
 48 # have to place corresponding `LoadModule' lines at this location so the
 49 # directives contained in it are actually available _before_ they are used.
 50 # Statically compiled modules (those listed by `httpd -l') do not need
 51 # to be loaded here.
 52 #
 53 # Example:
 54 # LoadModule foo_module modules/mod_foo.so
 55 #
 56 Include conf.modules.d/*.conf
 
将模块相关的配置文件导入进来，支持*的通配符，但要注意文件导入的顺序，有时可能会出错；模块之间有依赖性；


---
352 # Load config files in the &quot;/etc/httpd/conf.d&quot; directory, if any.
353 IncludeOptional conf.d/*.conf

IncludeOptional 在要导入的文件不存在时不报错，Include就不行，会报错；

httpd启动之前，会把include包含的文件，都合并在一起，再运行；
</code></pre><p>Define 、UnDefine</p>
<pre><code>定义一个变量，【向后】全局范围生效；
配置文件的 Define 等同于httpd 启动时的 -D name命令行参数；
-D 命令行定义的参数由于配置文件，

Define param [value] 定义

${param} 引用

UnDefine param 取消定义
</code></pre><p>VirtualHost</p>
<pre><code>&lt;VirtualHost 1.1.1.1:80&gt;  # ip选择*为监听本机所有ip，端口可以自定义实现基于端口的虚拟主机
	ServerName pc.bo.com # 定义虚拟主机主机名；
	DocumentRoot &quot;/var/www/html/pc&quot; # 该虚拟主机的网页文件根目录，【注意Directory指令放行】
	ErrorLog &quot;logs/pc.bo.error.log&quot; # 定义错误日志
	TransferLog &quot;logs/pc.bo.access.log&quot; # 定义访问日志；
	
	
&lt;/VirtualHost&gt;
虚拟主机，根据最多匹配原则，请求被转发给能匹配最多的虚拟主机上
</code></pre><p>Options 、AllowOverride</p>
<pre><code>---
Options 指令可以启动或禁用其所在目录的某些特性；该指令的值有：
	All
	None
	ExecCGI
	FollowSymLinks
	Includes
	IncludesNOEXEC
	Indexes 展示当前目录下文件，下载服务时需要
	MultiViews
	SymLinksIFOwnerMatch
不指定options，默认为all，一般除了下载服务会开启indexes选择，其他都禁用；
用Options None



---
allowoverride指令用于控制是否读取.htaccess配置文件；
。。没懂；

</code></pre><p>Require</p>
<pre><code>用于控制对目录的访问权限；主要功能由mod_authz_core模块提供；

</code></pre><p>长连接相关指令</p>
<pre><code>KeepAlive on/off

没有长连接时，客户端请求建立了一个tcp连接后，发一个http请求，服务端响应后，就把该连接关闭；
开启长连接时，允许客户端和服务端建立的一个tcp连接期间，客户端可以向服务器发起多次http请求；2个请求之间的时间间隔超过设定的超时时间后，就会断开，客户端需求再发起请求的话，需要再次发起建立tcp连接请求；
长连接内，每发一个新请求，计时器会归零重新计时；若设置了一次长连接最大可发的请求数，即便请求间隔不超时超时时间，达到上限次数后，也会关闭；

KeepAliveTimeout 60 2次请求间隔超过60s就断开
MaxKeepAliveRequests 500 一次长连接最多500个请求，多于500个后，即使超时时间不到，也会断开长连接；
</code></pre><h2 id="容器类指令"><a href="#容器类指令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:容器类指令" class="headings">容器类指令</a></h2>
<ul>
<li><Directory> 、<Files>、<DirectoryMatch>、<FilesMatch> # 针对的是文件系统</li>
<li><Location> <Location> # 针对的是uri</li>
<li><IfDefine>、<IfModule>、<IfVersion>判断</li>
<li><If> <ElseIf> <Else></li>
</ul>
<Directory> 
<pre><code>
---
&lt;Directory&gt;指令，作用是对于匹配到的目录，封装一组指令，改指令对该目录递归生效；
一般是绝对路径，目录指的是根文件系统的目录，一般以&quot;/“开头，使用相对路径也是相对于根
&lt;Directory dir1&gt; 等价于&lt;Directory /dir1&gt; 匹配的是主机上的 /dir1

示例：禁止根下所有的访问，但是放开/var/www的访问；
---
禁止：
102 &lt;Directory /&gt;
103     AllowOverride none
104     Require all denied 禁止
105 &lt;/Directory&gt;
表示主机的根文件系统从根开始不给访问；先从大范围禁止，逐步放开小范围，安全！

放开
122 # Relax access to content within /var/www.
123 #
124 &lt;Directory &quot;/var/www&quot;&gt;
125     AllowOverride None
126     # Allow open access:
127     Require all granted 拒绝
128 &lt;/Directory&gt;

Options 可以跟多个值；
Indexes 该项开放文件列表给用户；
FollowSymLinks 允许访问符号连接源文件；
#
AllowOverride
控制.htaccess文件中的访问控制相关指令；能否覆盖主配置文件；
AllowOverride All; .htaccess指令都有效；
AllowOverride None；.htaccess 文件整个无效
AllowOverride AuthConfig .htaccess 除了authcofig，.htaccess文件中其他指令无效；
</code></pre><Files>
<pre><code>files匹配的是单个，或一写文件，生效范围是限于它所在的外层标签；
如下：/usr/local/apache/htdocs目录下，都可以访问，除了其下的private.html文件（递归生效）

&lt;Directory /usr/local/apache/htdocs&gt;
    require all granted
    &lt;Files private.html&gt;
        required all denied
    &lt;/Files&gt;
    
&lt;/Directory&gt;


---
directory 和files指令支持 * ？ [a-Z]等通配符，但是通配符，【不能匹配/符号】即不能跨目录
例如：
&lt;Directory /*/public.html&gt; 不能匹配 /home/wang/public.html
&lt;Directory /home/*/public.html&gt; 才能匹配；

--- 支持正则表达式，用~符号
&lt;Directory ~ /usr/local/apache/htdocs/dir[1-9]&gt;
&lt;/Directory&gt;
等价于
&lt;DirectoryMatch /usr/local/apache/htdocs/dir[1-9]&gt;
&lt;/Directory&gt;

&lt;Files&gt;指令也支持正则；
</code></pre><Location>
<pre><code>Directory和Files匹配的都是 本机主机的根文件系统上的路径！

而Location匹配的是URL后面的路径；

相同：都是对匹配到的路径，封装一组指令，只在该匹配路径内生效；

示例：
http://1.1.1.1/dir1/index.html
匹配的location是：
&lt;Location &quot;/dir1&quot;&gt;
	...
&lt;/Location&gt;

---
location 三种模式：
1，location精确匹配url路径
2，location末尾加/ 只匹配该目录下的文件
3，location末尾不加/ 匹配该目录下的文件和目录本身

示例：
&lt;Location &quot;/dir1/&quot;&gt;
&lt;/Location&gt;
匹配  /dir1/ /dir1/1.txt

&lt;Location &quot;/dir1&quot;&gt;
&lt;/Location&gt;
匹配 /dir1 /dir1/ dir1/1.txt
</code></pre><p><IfDefine>、<IfModule>、<IfVersion>判断</p>
<pre><code>都为条件判断容器，且都只在httpd启动时进行判断，
为真，封装在内的指令生效，否则忽略，
条件前加！表否定；

---
ifmodule，启动时加载了某模块的话，那么该容器内的指令就生效；
可以是静态加载模块，或LoadModule加载的模块，(此时，LoadModule指令需要在IfModule之前)
eg：
LoadModule status_module modules/mod_status.so

&lt;IfModule &quot;status_module&quot;&gt;
	&lt;Location &quot;/server_status&quot;&gt;
		SetHandler server-status
		Require all granted
	&lt;/Location&gt;
&lt;/IfModule&gt;

---
IfDefine param判断参数是否定义，定义了，为真，其内部指令生效；否则忽略；
条件前加！表否定；

httpd启动时，加的-D选项，和配置文件的Define指令都可定义参数；
Define指令要在IfDefine之前；
eg：
httpd -DReverserProxy -DUserCache -DMemCache ...
&lt;IfDefine ReverseProxy&gt;
	LoadModule proxy_module modules/mod_proxy.so
	LoadModule proxy_http_module modules/mode_proxy_http.so
	
	&lt;IfDefine UseCache&gt;
		LoadModule cache_module modules/mod_cache.so
		&lt;IfDefine MemCache&gt;
			LoadModule mem_cache_module modules/mod_mem_cache.so
		&lt;/IfDefine&gt;
		&lt;IfDefine !MemCache&gt;
			LoadModule cache_disk_module modules/mod_cache_disk.so
		&lt;/IfDefine&gt;
	&lt;/IfDefine&gt;
	
&lt;/IfDefine&gt;

---
&lt;IfVersion &gt;=2.4&gt;
	...
&lt;/IfVersion&gt;
</code></pre><p><If> <ElseIf> <Else></p>
<pre><code>eg:
判断请求主机地址是8位还是16位掩码；
&lt;If &quot;-R '1.1.0.0/16'&quot;&gt;
	...
&lt;/If&gt;
&lt;ElseIf &quot;-R '1.0.0.0/8'&quot;&gt;
	...
&lt;/ElseIf&gt;
&lt;Else&gt;
	...
&lt;/Else&gt;

</code></pre><h2 id="配置文件合并规则"><a href="#配置文件合并规则" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:配置文件合并规则" class="headings">配置文件合并规则</a></h2>
<p>先把所有配置include进来，然后根据合并顺序处理</p>
<p>合并顺序：</p>
<ol>
<li>directory：</li>
<li>directorymatch</li>
<li>files和filesmatch等级别</li>
<li>location和locationmatch等级别</li>
<li>if</li>
</ol>
<p>【directory之间处理顺序，先匹配离/近的，如：/var/web/dir 优于/var/web/dir/subdir】</p>
<p>【其余4个，根据出现在配置文件中顺序处理，如：/foo请求，location &quot;/foo/bar&quot; location &quot;/foo&quot;，2个location谁在前，就匹配到谁去处理】</p>
<p>【virtualhost，在外部配置处理后，再处理，所以可以覆盖外部配置】</p>
<pre><code>eg：请求的是/example/index.html
&lt;Directory &quot;/&quot;&gt;
    Header set CustomHeaderName one
    &lt;FilesMatch &quot;.*&quot;&gt;
        Header set CustomHeaderName three
        不能继续匹配的原因，是通配符不能跨目录符号/，应该是？
    &lt;/FilesMatch&gt;
&lt;/Directory&gt;

&lt;Directory &quot;/example&quot;&gt;
    Header set CustomHeaderName two
&lt;/Directory&gt;
最终首部值是three，
one-》two-》three





---
&lt;Location &quot;/&quot;&gt;
    E
&lt;/Location&gt;

&lt;Files &quot;f.html&quot;&gt;
    D
&lt;/Files&gt;

&lt;VirtualHost *&gt;
&lt;Directory &quot;/a/b&quot;&gt;
    B
&lt;/Directory&gt;
&lt;/VirtualHost&gt;

&lt;DirectoryMatch &quot;^.*b$&quot;&gt;
    C
&lt;/DirectoryMatch&gt;

&lt;Directory &quot;/a/b&quot;&gt;
    A
&lt;/Directory&gt;

E，location在最后
D，file次之
C，DirectoryMatch再次
B在virtualhost内部，后处理
所以顺序是：A B C D E



---
&lt;Location &quot;/&quot;&gt;
    Require all granted
&lt;/Location&gt;

# Whoops!  This &lt;Directory&gt; section will have no effect
&lt;Directory &quot;/&quot;&gt;
    &lt;RequireAll&gt;
        Require all granted
        Require not host badguy.example.com
    &lt;/RequireAll&gt;
&lt;/Directory&gt;

directory顺序在前；
directory设置不生效，被location后续覆盖了！
</code></pre>
            </div>

            
    
    
        <ul class="post-copyright">
            <li class="copyright-item author"><span class="copyright-item-text">作者</span>：<a href="latteStudio.github.io" class="p-author h-card" target="_blank" rel="noopener">latteStudio</a></li>
            
                
                
                
                
                <li class="copyright-item link"><span class="copyright-item-text">链接</span>：<a href="/posts/httpd%E4%B9%8B%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" target="_blank" rel="noopener">https://latteStudio.github.io/posts/httpd之安装与配置/</a></li>
            
            <li class="copyright-item license"><span class="copyright-item-text">许可</span>：<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></li>
            
        </ul>
    



        </article>

        

        
    <div class="updated-badge-container">
        <span title="Updated @ 2020-10-16 11:00:33 CST" style="cursor:help">

<svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2020-10-16</text><text x="915" y="140" textLength="650" transform="scale(.1)">2020-10-16</text></g></svg>
        </span></div>



        


        <div class="post-share">

        

        <div class="share-items">

            

            

            

            

            

            

            

            

            

        </div>

    </div>




        
    
    
        <div class="related-posts">
            <h2 class="related-title">相关文章：<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/></svg></h2>
            <ul class="related-list">
                
                    <li class="related-item">
                        <a href="/posts/httpd%E4%B9%8Blamp%E7%8E%AF%E5%A2%83/" class="related-link">httpd之LAMP环境</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/httpd%E4%B9%8B%E4%B8%83%E5%B1%82%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1/" class="related-link">httpd之七层代理服务</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/httpd%E4%B9%8Bweb%E6%9C%8D%E5%8A%A1/" class="related-link">httpd之web服务</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/httpd%E4%B9%8B%E4%B8%89%E7%A7%8Dmpm%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%9E%8B/" class="related-link">httpd之三种mpm工作模型</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/tomcat%E4%B9%8B%E4%B8%8E%E9%9D%99%E6%80%81web%E7%BB%93%E5%90%88%E9%85%8D%E7%BD%AE/" class="related-link">tomcat之与静态web结合</a>
                    </li>
                
            </ul>
        </div>
    



        
    
        <div class="post-tags">
            
                
                
                
                
                    
                    <a href="/tags/httpd/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>httpd</a>
                
            
        </div>
    



        


        


        
    
        
        
    
    
    
    
        <ul class="post-nav">
            
                <li class="post-nav-prev">
                    <a href="/posts/tomcat%E4%B9%8B%E4%B8%8E%E9%9D%99%E6%80%81web%E7%BB%93%E5%90%88%E9%85%8D%E7%BD%AE/" rel="prev">&lt; tomcat之与静态web结合</a>
                </li>
            
            
                <li class="post-nav-next">
                    <a href="/posts/nginx%E4%B9%8Blnmp%E7%8E%AF%E5%A2%83/" rel="next">nginx之LNMP环境 &gt;</a>
                </li>
            
        </ul>
    



        
    

        <div class="load-comments">
            <div id="load-comments">加载评论</div>
        </div>

        

        
            <div id="vcomments"></div>
        

        

    



    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="site-info">©&nbsp;2019–2021&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;latteStudio</div><div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="noopener">MemE</a></div>

            


            
        </div>
   <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    </footer>


        </div>
        

        






    

        

        
            <script>
    function loadComments() {
        if (typeof Valine === 'undefined') {
            var getScript = (options) => {
                var script = document.createElement('script');
                script.defer = true;
                script.crossOrigin = 'anonymous';
                Object.keys(options).forEach((key) => {
                    script[key] = options[key];
                });
                document.body.appendChild(script);
            };
            getScript({
                src: 'https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js',
                onload: () => {
                    newValine();
                }
            });
        } else {
            newValine();
        }
    }
    function newValine() {
        new Valine({
            el: '#vcomments',
            appId: '6hqsJkBQS3CRAfdMlpW9GsOJ-9Nh9j0Va',
            appKey: '2CubjtDJ17iVljqrpM0hGyhS',
            placeholder: 'Leave a comment~',
            path: location.pathname,
            avatar: 'mm',
            meta: ["nick","mail","link"],
            pageSize:  10 ,
            lang: 'zh-cn',
            visitor:  false ,
            highlight:  true ,
            avatarForce:  false ,
            recordIP:  false ,
            serverURLs: '',
            emojiCDN: '',
            emojiMaps: {},
            enableQQ:  false ,
            requiredFields: []
        });
    }
</script>

        

        

    



    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js"></script>

<script>
    mediumZoom(document.querySelectorAll('div.post-body img'), {
        background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
    })
</script>




    <script src="https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js" type="module" defer></script>




    
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




    </body>
</html>
